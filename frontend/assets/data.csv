CREATE SCHEMA IF NOT EXISTS salesOptima;
USE salesOptima;

CREATE TABLE BusinessOwner (
"    busowner_id INT NOT NULL AUTO_INCREMENT,"
"    busowner_fname VARCHAR(20) NOT NULL,"
"    busowner_lname VARCHAR(20) NOT NULL,"
"    busowner_email VARCHAR(30) NOT NULL,"
"    busowner_phone VARCHAR(15) NOT NULL,"
"    busowner_company VARCHAR(20) NOT NULL,"
"    busowner_cert INT NOT NULL,"
"    busowner_password VARCHAR(100) NOT NULL, "
    PRIMARY KEY (busowner_id)
);

CREATE TABLE Customer (
"    customer_id INT NOT NULL AUTO_INCREMENT,"
"    customer_fname VARCHAR(20) NOT NULL,"
"    customer_lname VARCHAR(20) NOT NULL,"
"    customer_email VARCHAR(30) NOT NULL,"
"    customer_phone VARCHAR(15) NOT NULL,"
"    customer_CLV INT NOT NULL,"
"    busowner_id INT,"
"    PRIMARY KEY (customer_id),"
    FOREIGN KEY (busowner_id) REFERENCES BusinessOwner(busowner_id)
);

CREATE TABLE Product (
"    product_id INT NOT NULL AUTO_INCREMENT,"
"    product_name VARCHAR(30) NOT NULL,"
"    category VARCHAR(30) NOT NULL,"
"    product_price INT NOT NULL,"
"    product_stock INT NOT NULL,"
    PRIMARY KEY (product_id)
);

CREATE TABLE Transaction (
"    transaction_id INT NOT NULL AUTO_INCREMENT,"
"    customer_id INT,"
"    product_id INT,"
"    product_name VARCHAR(30),"
"    product_quantity INT,"
"    product_price INT,"
"    transaction_date DATE,"
"    PRIMARY KEY (transaction_id),"
"    FOREIGN KEY (customer_id) REFERENCES Customer(customer_id),"
    FOREIGN KEY (product_id) REFERENCES Product(product_id)
);

CREATE TABLE TotalAmount (
"    totalamount_id INT NOT NULL AUTO_INCREMENT,"
"    transaction_id INT,"
"    product_id INT,"
"    product_quantity INT,"
"    product_price INT,"
"    total_price INT,"
"    total_amount INT,"
"    transaction_date DATE,"
"    PRIMARY KEY (totalamount_id),"
    FOREIGN KEY (transaction_id) REFERENCES Transaction(transaction_id)
);

CREATE TABLE Revenue (
"    revenue_id INT NOT NULL AUTO_INCREMENT,"
"    totalamount_id INT,"
"    total_amount INT,"
"    total_revenue INT,"
"    transaction_date DATE,"
"    PRIMARY KEY (revenue_id),"
    FOREIGN KEY (totalamount_id) REFERENCES TotalAmount(totalamount_id)
);

-- The rest of your INSERT statements remain unchanged


"INSERT INTO BusinessOwner (busowner_fname, busowner_lname, busowner_email, busowner_phone, busowner_company, busowner_cert, busowner_password)"
"VALUES ('John', 'Doe', 'john.doe@example.com', '12345678901', 'Doe Enterprises', 123, 'admin123');"

"INSERT INTO Customer (customer_fname, customer_lname, customer_email, customer_phone, customer_CLV, busowner_id) "
VALUES 
"('Erica', 'Cavaneyro', 'erica.cavaneyro@example.com', '090123456702', 50000, 1),"
"('Jerzen', 'Espiritu', 'jerzen.espiritu@example.com', '090123456703', 80000, 1),"
"('Hannah', 'Joaquin', 'hannah.joaquin@example.com', '090123456704', 65000, 1),"
"('Ronald', 'Tugadi', 'ronald.tugadi@example.com', '090123456705', 45000, 1),"
"('John', 'Doe', 'john.doe@example.com', '090123456701', 75000, 1),"
"('Jane', 'Smith', 'jane.smith@example.com', '090123456706', 82000, 1),"
"('David', 'Johnson', 'david.johnson@example.com', '090123456707', 37000, 1),"
"('Emily', 'Brown', 'emily.brown@example.com', '090123456708', 55000, 1),"
"('Michael', 'Williams', 'michael.williams@example.com', '090123456709', 72000, 1),"
"('Jessica', 'Martinez', 'jessica.martinez@example.com', '090123456710', 89000, 1),"
"('William', 'Garcia', 'william.garcia@example.com', '090123456711', 41000, 1),"
"('Ashley', 'Jones', 'ashley.jones@example.com', '090123456712', 68000, 1),"
"('Daniel', 'Miller', 'daniel.miller@example.com', '090123456713', 59000, 1),"
"('Amanda', 'Davis', 'amanda.davis@example.com', '090123456714', 92000, 1),"
"('Matthew', 'Rodriguez', 'matthew.rodriguez@example.com', '090123456715', 78000, 1),"
"('Olivia', 'Martinez', 'olivia.martinez@example.com', '090123456716', 87000, 1),"
"('Ethan', 'Hernandez', 'ethan.hernandez@example.com', '090123456717', 94000, 1),"
"('Sophia', 'Lopez', 'sophia.lopez@example.com', '090123456718', 63000, 1),"
"('James', 'Gonzalez', 'james.gonzalez@example.com', '090123456719', 53000, 1),"
"('Amelia', 'Wilson', 'amelia.wilson@example.com', '090123456720', 84000, 1),"
"('Benjamin', 'Anderson', 'benjamin.anderson@example.com', '090123456721', 97000, 1),"
"('Mia', 'Thomas', 'mia.thomas@example.com', '090123456722', 60000, 1),"
"('Alexander', 'White', 'alexander.white@example.com', '090123456723', 93000, 1),"
"('Charlotte', 'Taylor', 'charlotte.taylor@example.com', '090123456724', 76000, 1),"
"('Lucas', 'Moore', 'lucas.moore@example.com', '090123456725', 69000, 1),"
"('Harper', 'Jackson', 'harper.jackson@example.com', '090123456726', 88000, 1),"
"('Evelyn', 'Harris', 'evelyn.harris@example.com', '090123456727', 77000, 1),"
"('Daniel', 'Thompson', 'daniel.thompson@example.com', '090123456728', 98000, 1),"
"('Scarlett', 'Davis', 'scarlett.davis@example.com', '090123456729', 95000, 1);"



"INSERT INTO Product (product_name, category, product_price, product_stock)"
VALUES
"('Cabinet', 'FRNTR', 5000, 20),"
"('Table', 'FRNTR', 3000, 15),"
"('Lamp Shade', 'FRNTR', 1500, 30),"
"('Chair', 'FRNTR', 2000, 25),"
"('Sofa', 'FRNTR', 8000, 10),"
"('Bed', 'FRNTR', 10000, 8),"
"('Bookshelf', 'FRNTR', 4000, 12),"
"('Coffee Table', 'FRNTR', 3500, 18),"
"('Desk', 'FRNTR', 4500, 16),"
"('Dining Table', 'FRNTR', 6000, 14),"
"('Water Bottle', 'OTHER', 200, 50),"
"('Soft Drinks', 'OTHER', 150, 100),"
"('Cup', 'OTHER', 100, 200),"
"('Plate', 'OTHER', 120, 150),"
"('Knife Set', 'KTCHN', 300, 30),"
"('Cooking Pot', 'KTCHN', 500, 25),"
"('Toaster', 'KTCHN', 1000, 20),"
"('Microwave', 'KTCHN', 2000, 10),"
"('Blender', 'KTCHN', 1500, 15),"
"('Television', 'GDGT', 10000, 5),"
"('Laptop', 'GDGT', 8000, 8),"
"('Smartphone', 'GDGT', 6000, 12),"
"('Headphones', 'GDGT', 500, 20),"
"('Speaker', 'GDGT', 1500, 15);"

"INSERT INTO Transaction (transaction_id, customer_id, product_id, product_name, product_quantity, product_price, transaction_date)"
VALUES
"(1, 1, 1, 'Cabinet', 2, 5000, '2024-02-01'),"
"(2, 1, 2, 'Table', 1, 3000, '2024-02-02'),"
"(3, 1, 3, 'Lamp Shade', 3, 1500, '2024-02-03'),"
"(4, 1, 4, 'Chair', 4, 2000, '2024-02-04'),"
"(5, 1, 5, 'Sofa', 1, 8000, '2024-02-05'),"
"(6, 1, 6, 'Bed', 1, 10000, '2024-02-06'),"
"(7, 1, 7, 'Bookshelf', 2, 4000, '2024-02-07'),"
"(8, 1, 8, 'Coffee Table', 1, 3500, '2024-02-08'),"
"(9, 1, 9, 'Desk', 2, 4500, '2024-02-09'),"
"(10, 2, 10, 'Dining Table', 3, 6000, '2024-02-10'),"
"(11, 3, 11, 'Water Bottle', 5, 200, '2024-02-11'),"
"(12, 4, 12, 'Soft Drinks', 10, 150, '2024-02-12'),"
"(13, 5, 13, 'Cup', 8, 100, '2024-02-13'),"
"(14, 6, 14, 'Plate', 7, 120, '2024-02-14'),"
"(15, 7, 15, 'Knife Set', 1, 300, '2024-02-15'),"
"(16, 8, 16, 'Cooking Pot', 2, 500, '2024-02-16'),"
"(17, 9, 17, 'Toaster', 1, 1000, '2024-02-17'),"
"(18, 10, 18, 'Microwave', 1, 2000, '2024-02-18'),"
"(19, 11, 19, 'Blender', 3, 1500, '2024-02-19'),"
"(20, 12, 20, 'Television', 1, 10000, '2024-02-20'), "
"(21, 13, 1, 'Cabinet', 2, 5000, '2023-01-01'),"
"(22, 14, 2, 'Table', 1, 3000, '2023-01-02'),"
"(23, 15, 3, 'Lamp Shade', 3, 1500, '2023-01-03'),"
"(24, 16, 4, 'Chair', 4, 2000, '2023-01-04'),"
"(25, 17, 5, 'Sofa', 1, 8000, '2023-01-05'),"
"(26, 18, 6, 'Bed', 1, 10000, '2023-01-06'),"
"(27, 19, 7, 'Bookshelf', 2, 4000, '2023-01-07'),"
"(28, 20, 8, 'Coffee Table', 1, 3500, '2023-01-08'),"
"(29, 1, 9, 'Desk', 2, 4500, '2023-01-09'),"
"(30, 2, 10, 'Dining Table', 3, 6000, '2023-01-10'),"
"(31, 3, 11, 'Water Bottle', 5, 200, '2023-01-11'),"
"(32, 4, 12, 'Soft Drinks', 10, 150, '2023-01-12'),"
"(33, 5, 13, 'Cup', 8, 100, '2023-01-13'),"
"(34, 6, 14, 'Plate', 7, 120, '2023-12-14'),"
"(35, 7, 15, 'Knife Set', 1, 300, '2023-11-15'),"
"(36, 8, 16, 'Cooking Pot', 2, 500, '2023-10-16'),"
"(37, 9, 17, 'Toaster', 1, 1000, '2023-09-17'),"
"(38, 10, 18, 'Microwave', 1, 2000, '2023-08-18'),"
"(39, 11, 19, 'Blender', 3, 1500, '2023-07-19'),"
"(40, 12, 20, 'Television', 1, 10000, '2023-06-20'),"
"(41, 13, 1, 'Cabinet', 2, 5000, '2023-05-21'),"
"(42, 14, 2, 'Table', 1, 3000, '2023-04-22'),"
"(43, 15, 3, 'Lamp Shade', 3, 1500, '2023-03-23'),"
"(44, 16, 4, 'Chair', 4, 2000, '2023-02-24'),"
"(45, 17, 5, 'Sofa', 1, 8000, '2023-01-25'),"
"(46, 18, 1, 'Cabinet', 2, 5000, '2022-08-01'),"
"(47, 19, 2, 'Table', 1, 3000, '2022-08-02'),"
"(48, 20, 3, 'Lamp Shade', 3, 1500, '2022-08-03'),"
"(49, 1, 4, 'Chair', 4, 2000, '2022-08-04'),"
"(50, 2, 5, 'Sofa', 1, 8000, '2022-08-05'),"
"(51, 3, 6, 'Bed', 1, 10000, '2022-08-06'),"
"(52, 4, 7, 'Bookshelf', 2, 4000, '2022-08-07'),"
"(53, 5, 8, 'Coffee Table', 1, 3500, '2022-08-08'),"
"(54, 6, 9, 'Desk', 2, 4500, '2022-08-09'),"
"(55, 7, 10, 'Dining Table', 3, 6000, '2022-08-10'),"
"(56, 8, 11, 'Water Bottle', 5, 200, '2022-08-11'),"
"(57, 9, 12, 'Soft Drinks', 10, 150, '2022-08-12'),"
"(58, 10, 13, 'Cup', 8, 100, '2022-08-13'),"
"(59, 11, 14, 'Plate', 7, 120, '2022-08-14'),"
"(60, 12, 15, 'Knife Set', 1, 300, '2022-08-15'),"
"(61, 13, 16, 'Cooking Pot', 2, 500, '2022-08-16'),"
"(62, 14, 17, 'Toaster', 1, 1000, '2022-08-17'),"
"(63, 15, 18, 'Microwave', 1, 2000, '2022-08-18'),"
"(64, 16, 19, 'Blender', 3, 1500, '2022-08-19'),"
"(65, 17, 20, 'Television', 1, 10000, '2022-08-20'),"
"(66, 18, 1, 'Cabinet', 2, 5000, '2022-08-21'),"
"(67, 19, 2, 'Table', 1, 3000, '2022-08-22'),"
"(68, 20, 3, 'Lamp Shade', 3, 1500, '2022-08-23'),"
"(69, 1, 4, 'Chair', 4, 2000, '2022-08-24'),"
"(70, 2, 5, 'Sofa', 1, 8000, '2022-08-25'),"
"(71, 3, 6, 'Bed', 1, 10000, '2022-08-26'),"
"(72, 4, 7, 'Bookshelf', 2, 4000, '2022-08-27'),"
"(73, 5, 8, 'Coffee Table', 1, 3500, '2022-08-28'),"
"(74, 6, 9, 'Desk', 2, 4500, '2022-08-29'),"
"(75, 7, 10, 'Dining Table', 3, 6000, '2022-08-30');"

-- Populate TotalAmount table
"INSERT INTO TotalAmount (transaction_id, product_id, product_quantity, product_price, total_price, total_amount, transaction_date)"
VALUES
"(1, 1, 2, 5000, 10000, 15000, '2024-02-01'),"
"(2, 2, 1, 3000, 3000, 3500, '2024-02-02'),"
"(3, 3, 3, 1500, 4500, 5000, '2024-02-03'),"
"(4, 4, 4, 2000, 8000, 8500, '2024-02-04'),"
"(5, 5, 1, 8000, 8000, 8500, '2024-02-05'),"
"(6, 6, 1, 10000, 10000, 10500, '2024-02-06'),"
"(7, 7, 2, 4000, 8000, 8500, '2024-02-07'),"
"(8, 8, 1, 3500, 3500, 4000, '2024-02-08'),"
"(9, 9, 2, 4500, 9000, 9500, '2024-02-09'),"
"(10, 10, 3, 6000, 18000, 18500, '2024-02-10'),"
"(11, 11, 5, 200, 1000, 1500, '2024-02-11'),"
"(12, 12, 10, 150, 1500, 2000, '2024-02-12'),"
"(13, 13, 8, 100, 800, 1300, '2024-02-13'),"
"(14, 14, 7, 120, 840, 1390, '2024-02-14'),"
"(15, 15, 1, 300, 300, 800, '2024-02-15'),"
"(16, 16, 2, 500, 1000, 1500, '2024-02-16'),"
"(17, 17, 1, 1000, 1000, 1500, '2024-02-17'),"
"(18, 18, 1, 2000, 2000, 2500, '2024-02-18'),"
"(19, 19, 3, 1500, 4500, 5000, '2024-02-19'),"
"(20, 20, 1, 10000, 10000, 10500, '2024-02-20'), "
"(21, 1, 2, 5000, 10000, 15000, '2022-08-01'),"
"(22, 2, 1, 3000, 3000, 3500, '2022-08-05'),"
"(23, 3, 3, 1500, 4500, 5000, '2022-08-10'),"
"(24, 4, 4, 2000, 8000, 8500, '2022-08-15'),"
"(25, 5, 1, 8000, 8000, 8500, '2022-08-20'),"
"(26, 6, 1, 10000, 10000, 10500, '2022-08-25'),"
"(27, 7, 2, 4000, 8000, 8500, '2022-09-01'),"
"(28, 8, 1, 3500, 3500, 4000, '2022-09-05'),"
"(29, 9, 2, 4500, 9000, 9500, '2022-09-10'),"
"(30, 10, 3, 6000, 18000, 18500, '2022-09-15'),"
"(31, 11, 5, 200, 1000, 1500, '2022-09-20'),"
"(32, 12, 10, 150, 1500, 2000, '2022-09-25'),"
"(33, 13, 8, 100, 800, 1300, '2022-10-01'),"
"(34, 14, 7, 120, 840, 1390, '2022-10-05'),"
"(35, 15, 1, 300, 300, 800, '2022-10-10'),"
"(36, 16, 2, 500, 1000, 1500, '2022-10-15'),"
"(37, 17, 1, 1000, 1000, 1500, '2022-10-20'),"
"(38, 18, 1, 2000, 2000, 2500, '2022-10-25'),"
"(39, 19, 3, 1500, 4500, 5000, '2022-11-01'),"
"(40, 20, 1, 10000, 10000, 10500, '2022-11-05'),"
"(41, 1, 2, 5000, 10000, 15000, '2022-11-10'),"
"(42, 2, 1, 3000, 3000, 3500, '2022-11-15'),"
"(43, 3, 3, 1500, 4500, 5000, '2022-11-20'),"
"(44, 4, 4, 2000, 8000, 8500, '2022-11-25'),"
"(45, 5, 1, 8000, 8000, 8500, '2022-12-01'),"
"(46, 6, 1, 10000, 10000, 10500, '2022-12-05'),"
"(47, 7, 2, 4000, 8000, 8500, '2022-12-10'),"
"(48, 8, 1, 3500, 3500, 4000, '2022-12-15'),"
"(49, 9, 2, 4500, 9000, 9500, '2022-12-20'),"
"(50, 10, 3, 6000, 18000, 18500, '2022-12-25'),"
"(51, 11, 5, 200, 1000, 1500, '2023-01-01'),"
"(52, 12, 10, 150, 1500, 2000, '2023-01-05'),"
"(53, 13, 8, 100, 800, 1300, '2023-01-10'),"
"(54, 14, 7, 120, 840, 1390, '2023-01-15'),"
"(55, 15, 1, 300, 300, 800, '2023-01-20'),"
"(56, 16, 2, 500, 1000, 1500, '2023-01-25'),"
"(57, 17, 1, 1000, 1000, 1500, '2023-02-01'),"
"(58, 18, 1, 2000, 2000, 2500, '2023-02-05'),"
"(59, 19, 3, 1500, 4500, 5000, '2023-02-10'),"
"(60, 20, 1, 10000, 10000, 10500, '2023-02-15');"


"INSERT INTO Revenue (totalamount_id, total_amount, total_revenue, transaction_date)"
SELECT 
"    FLOOR(RAND() * (SELECT COUNT(DISTINCT totalamount_id) FROM TotalAmount)) + 1 AS totalamount_id,"
"    ROUND(RAND() * 1000, 2) AS total_amount,"
"    ROUND(RAND() * 10000, 2) AS total_revenue,"
"    DATE_ADD('2022-08-01', INTERVAL FLOOR(RAND() * DATEDIFF('2024-02-15', '2022-08-01')) DAY) AS transaction_date"
FROM
"    information_schema.tables AS t1,"
    information_schema.tables AS t2
LIMIT 200;








-- Calculate total amount for each transaction and update TotalAmount table
UPDATE TotalAmount
SET total_amount = (SELECT SUM(total_price) FROM TotalAmount WHERE transaction_id = TotalAmount.transaction_id);
